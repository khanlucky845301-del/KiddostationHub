<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U-4 Stationary Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS with enhancements for admin/user roles and transaction system */
        :root {
            --primary: #0d47a1;
            --primary-light: #5472d3;
            --primary-dark: #002171;
            --secondary: #00838f;
            --secondary-light: #4fb3bf;
            --secondary-dark: #005662;
            --accent: #e65100;
            --accent-light: #ff9e40;
            --text-primary: #263238;
            --text-secondary: #546e7a;
            --text-light: #ffffff;
            --background: #f5f7fa;
            --card-bg: #ffffff;
            --border: #e0e6ed;
            --success: #00897b;
            --warning: #ffa000;
            --error: #d32f2f;
            --shadow: rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient: linear-gradient(135deg, #0d47a1, #5472d3);
            --card-gradient: linear-gradient(135deg, #ffffff, #f5f7fa);
            --glass-bg: rgba(255, 255, 255, 0.85);
            --admin-color: #d32f2f;
            --user-color: #00897b;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
       
        /* Enhanced Login Form Styles */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0d47a1, #5472d3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: all 0.5s ease;
        }
        .login-container.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .login-form {
            background: var(--glass-bg);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 450px;
            max-width: 90%;
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.6s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .login-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .login-header h2 {
            color: var(--primary);
            font-size: 2.2rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        .login-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        .login-type-selector {
            display: flex;
            margin-bottom: 25px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .login-type-btn {
            flex: 1;
            padding: 12px;
            background: var(--background);
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }
        .login-type-btn.active {
            background: var(--primary);
            color: white;
        }
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
        .form-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.8);
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(13, 71, 161, 0.1);
            background: var(--card-bg);
        }
        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s ease;
        }
        .login-btn:hover::before {
            left: 100%;
        }
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(13, 71, 161, 0.3);
        }
        .error-message {
            color: var(--error);
            margin-top: 20px;
            text-align: center;
            font-weight: 500;
            display: none;
            padding: 12px;
            background: rgba(211, 47, 47, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--error);
        }
        .user-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 12px var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--gradient);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        .user-avatar.admin {
            background: linear-gradient(135deg, var(--admin-color), #ff6b6b);
        }
        .user-avatar.user {
            background: linear-gradient(135deg, var(--user-color), #4db6ac);
        }
        .user-role {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
        }
        .user-role.admin {
            background: rgba(211, 47, 47, 0.1);
            color: var(--admin-color);
        }
        .user-role.user {
            background: rgba(0, 137, 123, 0.1);
            color: var(--user-color);
        }
        .logout-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: var(--transition);
        }
        .logout-btn:hover {
            background: rgba(13, 71, 161, 0.1);
            color: var(--primary);
        }
       
        /* Header Styles */
        header {
            background: var(--gradient);
            color: var(--text-light);
            padding: 40px 0;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 8px 30px var(--shadow);
            position: relative;
            overflow: hidden;
        }
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(45deg);
            animation: pulse 8s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: rotate(45deg) scale(1); }
            50% { transform: rotate(45deg) scale(1.1); }
        }
        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 0 20px;
        }
        h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        .header-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            font-weight: 300;
            letter-spacing: 0.5px;
        }
       
        /* Dashboard Section */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        .dashboard-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            background: var(--card-gradient);
            border: 1px solid var(--border);
        }
        .dashboard-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px var(--shadow);
        }
        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: var(--primary);
            transition: height 0.3s ease;
        }
        .dashboard-card:hover::before {
            height: 0;
            width: 100%;
            background: var(--gradient);
            border-radius: 0 15px 15px 0;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .card-title {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--text-light);
            transition: var(--transition);
        }
        .dashboard-card:hover .card-icon {
            transform: rotate(10deg) scale(1.1);
        }
        .card-icon.primary {
            background: var(--gradient);
        }
        .card-icon.secondary {
            background: linear-gradient(135deg, #00838f, #4fb3bf);
        }
        .card-icon.accent {
            background: linear-gradient(135deg, #e65100, #ff9e40);
        }
        .card-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: 1px;
        }
       
        /* Account Balance Styles */
        .account-balance {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .account-balance::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }
        .balance-title {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-weight: 500;
        }
        .balance-amount {
            font-size: 2.8rem;
            font-weight: 700;
        }
        .balance-amount.positive {
            color: var(--success);
        }
        .balance-amount.negative {
            color: var(--error);
        }
        .balance-actions {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
       
        /* User Cart Styles */
        .user-cart {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            margin-bottom: 40px;
            border: 1px solid var(--border);
        }
        .user-cart.hidden {
            display: none;
        }
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        .cart-title {
            font-size: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .cart-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        .cart-item {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: var(--transition);
        }
        .cart-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        .cart-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .cart-item-name {
            font-weight: 600;
            color: var(--text-primary);
        }
        .cart-item-price {
            color: var(--secondary);
            font-weight: 600;
        }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }
        .cart-item-quantity input {
            width: 60px;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            text-align: center;
        }
        .cart-total {
            text-align: right;
            font-size: 1.3rem;
            font-weight: 600;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        .cart-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
        }
       
        /* Transaction History Styles */
        .transaction-history {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            margin-bottom: 40px;
            border: 1px solid var(--border);
        }
        .transaction-history.hidden {
            display: none;
        }
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        .history-title {
            font-size: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .history-list {
            list-style: none;
        }
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 10px;
            transition: var(--transition);
        }
        .history-item:hover {
            background: rgba(13, 71, 161, 0.05);
        }
        .history-details {
            flex: 1;
        }
        .history-date {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .history-description {
            font-weight: 500;
            margin-top: 5px;
        }
        .history-amount {
            font-weight: 600;
            font-size: 1.1rem;
        }
        .history-amount.positive {
            color: var(--success);
        }
        .history-amount.negative {
            color: var(--error);
        }
       
        /* Admin Panel Styles */
        .admin-panel {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            margin-bottom: 40px;
            border: 1px solid var(--border);
        }
        .admin-panel.hidden {
            display: none;
        }
        .admin-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .admin-panel-title {
            font-size: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 25px;
        }
        .admin-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }
        .admin-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        .admin-tab-content {
            display: none;
        }
        .admin-tab-content.active {
            display: block;
        }
        .user-management, .stationary-management, .transaction-management {
            margin-bottom: 30px;
        }
        .user-list, .stationary-list-admin {
            list-style: none;
            margin-top: 20px;
        }
        .user-item, .stationary-item-admin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .user-actions, .stationary-actions {
            display: flex;
            gap: 10px;
        }
        .edit-btn, .delete-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }
        .edit-btn {
            background: var(--primary);
            color: white;
        }
        .delete-btn {
            background: var(--error);
            color: white;
        }
        .edit-btn:hover, .delete-btn:hover {
            opacity: 0.9;
        }
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        .transaction-list {
            list-style: none;
            margin-top: 20px;
        }
        .transaction-item {
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .transaction-details {
            flex: 1;
        }
        .transaction-amount {
            font-weight: 600;
            font-size: 1.1rem;
        }
        .transaction-amount.positive {
            color: var(--success);
        }
        .transaction-amount.negative {
            color: var(--error);
        }
        .transaction-actions {
            display: flex;
            gap: 10px;
        }
        .approve-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
        }
        .reject-btn {
            background: var(--error);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
        }
       
        /* Balance Management Styles */
        .balance-management {
            background: var(--background);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        .balance-form {
            display: flex;
            gap: 15px;
            align-items: flex-end;
            margin-top: 15px;
        }
        .balance-form .form-group {
            flex: 1;
            margin-bottom: 0;
        }
       
        /* Notification */
        .notification {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 18px 25px;
            background: var(--success);
            color: var(--text-light);
            border-radius: 8px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 4px solid rgba(255, 255, 255, 0.3);
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.error {
            background: var(--error);
        }
        .notification.warning {
            background: var(--warning);
            color: var(--text-primary);
        }
       
        /* Print Button */
        .print-btn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00838f, #4fb3bf);
            color: var(--text-light);
            border: none;
            font-size: 26px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            z-index: 100;
        }
        .print-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
       
        /* Loading Spinner */
        .spinner {
            display: none;
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin: 25px auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
       
        /* Footer */
        footer {
            text-align: center;
            padding: 25px;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-top: 40px;
            border-top: 1px solid var(--border);
        }
       
        /* Enhanced UI Elements */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .floating {
            animation: floating 4s ease-in-out infinite;
        }
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(13, 71, 161, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(13, 71, 161, 0); }
            100% { box-shadow: 0 0 0 0 rgba(13, 71, 161, 0); }
        }
       
        /* Login validation styles */
        .validation-message {
            position: absolute;
            bottom: -20px;
            left: 0;
            font-size: 0.8rem;
            color: var(--error);
            display: none;
        }
        .form-group.error input {
            border-color: var(--error);
        }
        .form-group.error .validation-message {
            display: block;
        }
       
        /* Button Styles */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s ease;
        }
        .btn:hover::before {
            left: 100%;
        }
        .btn-primary {
            background: var(--gradient);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(13, 71, 161, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #00838f, #4fb3bf);
        }
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 131, 143, 0.3);
        }
        .btn-accent {
            background: linear-gradient(135deg, #e65100, #ff9e40);
        }
        .btn-accent:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(230, 81, 0, 0.3);
        }
       
        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
           
            .dashboard {
                grid-template-columns: 1fr;
            }
           
            .login-form {
                padding: 35px;
            }
           
            .user-info {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 20px;
            }
           
            .form-row {
                flex-direction: column;
            }
           
            .cart-items {
                grid-template-columns: 1fr;
            }
           
            .balance-form {
                flex-direction: column;
            }
        }
        @media print {
            .controls, .print-btn, .notification, .dashboard, .user-info, .admin-panel, .user-cart, .transaction-history {
                display: none;
            }
           
            body {
                background-color: white;
            }
        }
    </style>
</head>
<body>
    <!-- Login Form -->
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <div class="login-header">
                <h2>U-4 Stationary System</h2>
                <p>Please login to access the system</p>
            </div>
            <div class="login-type-selector">
                <button class="login-type-btn active" id="userLoginBtn">User Login</button>
                <button class="login-type-btn" id="adminLoginBtn">Admin Login</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter username" required>
                    <div class="validation-message">Please enter a valid username</div>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                    <div class="validation-message">Please enter a valid password</div>
                </div>
                <button type="submit" class="login-btn">Login</button>
                <div class="error-message" id="errorMessage">Invalid username or password</div>
            </form>
        </div>
    </div>
   
    <!-- User Info Bar -->
    <div class="user-info" id="userInfo" style="display: none;">
        <div class="user-avatar" id="userAvatar"></div>
        <div>
            <span id="usernameDisplay"></span>
            <div class="user-role" id="userRole"></div>
        </div>
        <button class="logout-btn" onclick="logout()" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </div>
   
    <div class="container">
        <header>
            <div class="header-content">
                <h1>U-4 Stationary Management System</h1>
                <div class="header-subtitle">Professional Stationary Tracking for Class U-4 Students</div>
            </div>
        </header>
       
        <!-- Dashboard -->
        <div class="dashboard">
            <div class="dashboard-card floating">
                <div class="card-header">
                    <div class="card-title">Total Students</div>
                    <div class="card-icon primary">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="card-value" id="totalStudents">33</div>
            </div>
            <div class="dashboard-card floating" style="animation-delay: 0.2s;">
                <div class="card-header">
                    <div class="card-title">Total Items</div>
                    <div class="card-icon secondary">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                </div>
                <div class="card-value" id="totalStationaryItems">32</div>
            </div>
            <div class="dashboard-card floating" style="animation-delay: 0.4s;">
                <div class="card-header">
                    <div class="card-title">Total Transactions</div>
                    <div class="card-icon accent">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                </div>
                <div class="card-value" id="totalTransactions">0</div>
            </div>
        </div>
       
        <!-- Account Balance (for users) -->
        <div class="account-balance" id="accountBalance" style="display: none;">
            <div class="balance-title">Your Account Balance</div>
            <div class="balance-amount" id="balanceAmount">₹0</div>
            <div class="balance-actions">
                <button class="btn btn-primary" onclick="requestCredit()">
                    <i class="fas fa-plus-circle"></i> Request Credit
                </button>
                <button class="btn btn-secondary" onclick="viewTransactionHistory()">
                    <i class="fas fa-history"></i> View History
                </button>
            </div>
        </div>
       
        <!-- User Cart (for users) -->
        <div class="user-cart hidden" id="userCart">
            <div class="cart-header">
                <div class="cart-title">
                    <i class="fas fa-shopping-cart"></i> Your Cart
                </div>
                <button class="btn btn-primary" onclick="submitOrder()">
                    <i class="fas fa-paper-plane"></i> Submit Order
                </button>
            </div>
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be generated here -->
            </div>
            <div class="cart-total">
                Total: <span id="cartTotal">₹0</span>
            </div>
            <div class="cart-actions">
                <button class="btn btn-secondary" onclick="clearCart()">
                    <i class="fas fa-trash"></i> Clear Cart
                </button>
            </div>
        </div>
       
        <!-- Transaction History (for users) -->
        <div class="transaction-history hidden" id="transactionHistory">
            <div class="history-header">
                <div class="history-title">
                    <i class="fas fa-history"></i> Transaction History
                </div>
                <button class="btn btn-secondary" onclick="hideTransactionHistory()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
            <ul class="history-list" id="historyList">
                <!-- Transaction history will be generated here -->
            </ul>
        </div>
       
        <!-- Admin Panel -->
        <div class="admin-panel hidden" id="adminPanel">
            <div class="admin-panel-header">
                <div class="admin-panel-title">
                    <i class="fas fa-cogs"></i> Admin Panel
                </div>
                <button class="btn btn-primary" onclick="refreshAdminData()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
           
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="user-management">User Management</button>
                <button class="admin-tab" data-tab="stationary-management">Stationary Management</button>
                <button class="admin-tab" data-tab="transaction-management">Transaction Management</button>
            </div>
           
            <div class="admin-tab-content active" id="user-management">
                <div class="user-management">
                    <h3>User Management</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newUsername">Username</label>
                            <input type="text" id="newUsername" placeholder="Enter username">
                        </div>
                        <div class="form-group">
                            <label for="newPassword">Password</label>
                            <input type="password" id="newPassword" placeholder="Enter password">
                        </div>
                        <div class="form-group">
                            <label for="newUserType">User Type</label>
                            <select id="newUserType">
                                <option value="user">User</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="addUser()">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                   
                    <div class="balance-management">
                        <h4>Manage User Balance</h4>
                        <div class="balance-form">
                            <div class="form-group">
                                <label for="balanceUser">User</label>
                                <select id="balanceUser">
                                    <!-- User options will be generated here -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="balanceAmount">Amount</label>
                                <input type="number" id="balanceAmount" placeholder="Enter amount">
                            </div>
                            <div class="form-group">
                                <label for="balanceType">Type</label>
                                <select id="balanceType">
                                    <option value="credit">Credit</option>
                                    <option value="debit">Debit</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="updateUserBalance()">
                                <i class="fas fa-sync-alt"></i> Update
                            </button>
                        </div>
                    </div>
                   
                    <ul class="user-list" id="userList">
                        <!-- User list will be generated here -->
                    </ul>
                </div>
            </div>
           
            <div class="admin-tab-content" id="stationary-management">
                <div class="stationary-management">
                    <h3>Stationary Management</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newItemName">Item Name</label>
                            <input type="text" id="newItemName" placeholder="Enter item name">
                        </div>
                        <div class="form-group">
                            <label for="newItemPrice">Price</label>
                            <input type="number" id="newItemPrice" placeholder="Enter price">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="addStationaryItem()">
                        <i class="fas fa-plus"></i> Add Item
                    </button>
                   
                    <ul class="stationary-list-admin" id="stationaryListAdmin">
                        <!-- Stationary list will be generated here -->
                    </ul>
                </div>
            </div>
           
            <div class="admin-tab-content" id="transaction-management">
                <div class="transaction-management">
                    <h3>Transaction Management</h3>
                   
                    <h4 style="margin-top: 30px;">Pending Orders</h4>
                    <ul class="transaction-list" id="pendingOrders">
                        <!-- Pending orders will be generated here -->
                    </ul>
                   
                    <h4 style="margin-top: 30px;">Credit Requests</h4>
                    <ul class="transaction-list" id="creditRequests">
                        <!-- Credit requests will be generated here -->
                    </ul>
                   
                    <h4 style="margin-top: 30px;">Transaction History</h4>
                    <ul class="transaction-list" id="transactionHistoryAdmin">
                        <!-- Transaction history will be generated here -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
   
    <button class="print-btn" onclick="window.print()">
        <i class="fas fa-print"></i>
    </button>
   
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i> <span id="notificationText">Operation completed successfully!</span>
    </div>
   
    <script>
        // Stationary items with prices
        let stationaryItems = [
            { name: "Upper Blade", price: 12 },
            { name: "Pencils", price: 5 },
            { name: "Blue Pen", price: 10 },
            { name: "Black Pen", price: 10 },
            { name: "Gillate Guard", price: 25 },
            { name: "Closeup", price: 20 },
            { name: "Tooth Brush", price: 20 },
            { name: "Cloth Brush", price: 35 },
            { name: "Active", price: 5 },
            { name: "katah", price: 10 },
            { name: "Coloueful Lungi", price: 120 },
            { name: "White Lungi", price: 150 },
            { name: "Topi", price: 100 },
            { name: "Neel", price: 10 },
            { name: "Comfort", price: 60 },
            { name: "Doctor Wash", price: 35 },
            { name: "Ujala", price: 10 },
            { name: "Harbal", price: 20 },
            { name: "Pen Pencil", price: 20 },
            { name: "Detol", price: 10 },
            { name: "Lux", price: 10 },
            { name: "Centhol", price: 10 },
            { name: "Pears", price: 40 },
            { name: "Sony Bar", price: 50 },
            { name: "Mirror", price: 10 },
            { name: "Comb", price: 5 },
            { name: "Surf", price: 10 },
            { name: "Hanger", price: 70 },
            { name: "Cliniv Plus", price: 20 },
            { name: "Dove", price: 35 },
            { name: "Handkerchief", price: 25 },
            { name: "Bandi", price: 55 },
            { name: "Underwear", price: 80 }
        ];
       
        // Student data
        const students = [
            { name: "Ansari Ahmed", age: 12 },
            { name: "Kaish Ansari", age: 11 },
            { name: "Shahil Ali", age: 12 },
            { name: "Mustafa NPL", age: 11 },
            { name: "Huzaifa Ansari", age: 12 },
            { name: "Shahbaz Ansari", age: 11 },
            { name: "Anas Ansari", age: 12 },
            { name: "Abdul Alam", age: 11 },
            { name: "Hashmat Raza", age: 12 },
            { name: "Yusuf Ali", age: 11 },
            { name: "Atif Neyaz", age: 12 },
            { name: "Tausif Raza", age: 11 },
            { name: "Shamsuddin Hashmi", age: 12 },
            { name: "Mokarram Faiz", age: 11 },
            { name: "Faizan Raza", age: 12 },
            { name: "Hamza Ali", age: 11 },
            { name: "Arif Khan", age: 12 },
            { name: "Ahad Abbasi", age: 11 },
            { name: "Mudassir", age: 12 },
            { name: "Nematullah", age: 11 },
            { name: "Zulqarnain", age: 12 },
            { name: "Zeeshan", age: 11 },
            { name: "Esmatullah", age: 12 },
            { name: "Mubashir raza", age: 11 },
            { name: "Aman Rshad", age: 12 },
            { name: "Syed Abdul Ahad", age: 11 },
            { name: "Farhan Raza", age: 12 },
            { name: "Ahmed Raza", age: 11 },
            { name: "Meraj Khan", age: 12 },
            { name: "Junaid Ansari", age: 11 },
            { name: "Md Hasan", age: 12 },
            { name: "Ghulam Yazdani", age: 11 },
            { name: "Ahsan Ansari", age: 12 }
        ];
       
        // Users data
        let users = {
            "KAISH": { password: "ALMISBAH25BATCH", name: "Kaish Ansari", type: "user", balance: 0 },
            "MERAJ": { password: "ALMISBAH25BATCH", name: "Meraj Khan", type: "user", balance: 0 },
            "HASAN": { password: "ALMISBAH25BATCH", name: "Md Hasan", type: "user", balance: 0 },
            "ALMISBAH": { password: "ALMISBAH25BATCH", name: "Admin", type: "admin", balance: 0 }
        };
       
        // Transactions data
        let transactions = [];
       
        // Pending orders
        let pendingOrders = [];
       
        // Current user
        let currentUser = null;
       
        // Enhanced Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
           
            const username = document.getElementById('username').value.trim().toUpperCase();
            const password = document.getElementById('password').value.trim();
           
            // Clear previous error states
            document.querySelectorAll('.form-group').forEach(group => {
                group.classList.remove('error');
            });
           
            // Validate inputs
            let hasError = false;
           
            if (username.length < 3) {
                document.getElementById('username').closest('.form-group').classList.add('error');
                hasError = true;
            }
           
            if (password.length < 6) {
                document.getElementById('password').closest('.form-group').classList.add('error');
                hasError = true;
            }
           
            if (hasError) {
                showNotification('Please fill in all fields correctly', 'warning');
                return;
            }
           
            // Login validation
            if (users[username] && users[username].password === password) {
                // Store login information
                localStorage.setItem('isLoggedIn', 'true');
                currentUser = {
                    username: username,
                    name: users[username].name,
                    type: users[username].type,
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
               
                // Hide login form
                document.getElementById('loginContainer').classList.add('hidden');
               
                // Show user info
                showUserInfo(username, users[username].name, users[username].type);
               
                // Show welcome notification
                showNotification(`Welcome, ${users[username].name}!`, 'success');
               
                // Initialize the system based on user type
                setTimeout(() => {
                    if (currentUser.type === 'admin') {
                        document.getElementById('adminPanel').classList.remove('hidden');
                        document.getElementById('userCart').classList.add('hidden');
                        document.getElementById('accountBalance').style.display = 'none';
                        document.getElementById('transactionHistory').classList.add('hidden');
                        initializeAdminPanel();
                    } else {
                        document.getElementById('adminPanel').classList.add('hidden');
                        document.getElementById('userCart').classList.remove('hidden');
                        document.getElementById('accountBalance').style.display = 'block';
                        document.getElementById('transactionHistory').classList.add('hidden');
                        updateUserBalance();
                        initializeUserCart();
                    }
                   
                    // Update dashboard stats
                    updateDashboardStats();
                }, 500);
            } else {
                // Show error message
                document.getElementById('errorMessage').style.display = 'block';
               
                // Shake the form
                const loginForm = document.querySelector('.login-form');
                loginForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    loginForm.style.animation = '';
                }, 500);
               
                showNotification('Invalid username or password', 'error');
            }
        });
       
        // Login type selector
        document.getElementById('userLoginBtn').addEventListener('click', function() {
            document.getElementById('userLoginBtn').classList.add('active');
            document.getElementById('adminLoginBtn').classList.remove('active');
            document.getElementById('loginForm').reset();
            document.getElementById('errorMessage').style.display = 'none';
        });
       
        document.getElementById('adminLoginBtn').addEventListener('click', function() {
            document.getElementById('adminLoginBtn').classList.add('active');
            document.getElementById('userLoginBtn').classList.remove('active');
            document.getElementById('loginForm').reset();
            document.getElementById('errorMessage').style.display = 'none';
        });
       
        // Show user info
        function showUserInfo(username, displayName, userType) {
            const userInfo = document.getElementById('userInfo');
            const userAvatar = document.getElementById('userAvatar');
            const usernameDisplay = document.getElementById('usernameDisplay');
            const userRole = document.getElementById('userRole');
           
            userInfo.style.display = 'flex';
            userAvatar.textContent = displayName.charAt(0);
            userAvatar.className = `user-avatar ${userType}`;
            usernameDisplay.textContent = displayName;
            userRole.textContent = userType === 'admin' ? 'Administrator' : 'User';
            userRole.className = `user-role ${userType}`;
        }
       
        // Logout functionality
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('currentUser');
            currentUser = null;
           
            // Clear form data
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
           
            // Show login form
            document.getElementById('loginContainer').classList.remove('hidden');
           
            // Hide user info
            document.getElementById('userInfo').style.display = 'none';
           
            // Hide admin panel and user cart
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('userCart').classList.add('hidden');
            document.getElementById('accountBalance').style.display = 'none';
            document.getElementById('transactionHistory').classList.add('hidden');
           
            showNotification('You have been logged out successfully', 'success');
        }
       
        // Add shake animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
       
        // Initialize user cart
        function initializeUserCart() {
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = '';
           
            stationaryItems.forEach((item, index) => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-header">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">₹${item.price}</div>
                    </div>
                    <div class="cart-item-quantity">
                        <label>Quantity:</label>
                        <input type="number" min="0" value="0" id="cart-item-${index}" onchange="updateCartTotal()">
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
           
            updateCartTotal();
        }
       
        // Update cart total
        function updateCartTotal() {
            let total = 0;
           
            stationaryItems.forEach((item, index) => {
                const quantityInput = document.getElementById(`cart-item-${index}`);
                const quantity = parseInt(quantityInput.value) || 0;
                total += item.price * quantity;
            });
           
            document.getElementById('cartTotal').textContent = `₹${total}`;
        }
       
        // Submit order
        function submitOrder() {
            let orderItems = [];
            let total = 0;
           
            stationaryItems.forEach((item, index) => {
                const quantityInput = document.getElementById(`cart-item-${index}`);
                const quantity = parseInt(quantityInput.value) || 0;
               
                if (quantity > 0) {
                    orderItems.push({
                        name: item.name,
                        price: item.price,
                        quantity: quantity
                    });
                    total += item.price * quantity;
                }
            });
           
            if (orderItems.length === 0) {
                showNotification('Please add items to your cart before submitting', 'warning');
                return;
            }
           
            // Check if user has sufficient balance
            if (users[currentUser.username].balance < total) {
                showNotification('Insufficient balance. Please add credit to your account.', 'error');
                return;
            }
           
            // Create pending order
            const order = {
                id: Date.now(),
                username: currentUser.username,
                items: orderItems,
                total: total,
                date: new Date().toISOString(),
                status: 'pending'
            };
           
            pendingOrders.push(order);
            saveDataToStorage();
           
            // Clear cart
            clearCart();
           
            showNotification('Order submitted successfully! Waiting for admin approval.', 'success');
        }
       
        // Clear cart
        function clearCart() {
            stationaryItems.forEach((item, index) => {
                const quantityInput = document.getElementById(`cart-item-${index}`);
                quantityInput.value = 0;
            });
           
            updateCartTotal();
        }
       
        // Request credit
        function requestCredit() {
            const amount = prompt('Enter the amount of credit you would like to request:');
            if (amount && !isNaN(amount) && parseFloat(amount) > 0) {
                const request = {
                    id: Date.now(),
                    username: currentUser.username,
                    amount: parseFloat(amount),
                    date: new Date().toISOString(),
                    status: 'pending',
                    type: 'credit_request'
                };
               
                pendingOrders.push(request);
                saveDataToStorage();
               
                showNotification(`Credit request of ₹${amount} submitted successfully!`, 'success');
            } else {
                showNotification('Please enter a valid amount', 'warning');
            }
        }
       
        // View transaction history
        function viewTransactionHistory() {
            document.getElementById('transactionHistory').classList.remove('hidden');
            loadUserTransactionHistory();
        }
       
        // Hide transaction history
        function hideTransactionHistory() {
            document.getElementById('transactionHistory').classList.add('hidden');
        }
       
        // Load user transaction history
        function loadUserTransactionHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
           
            // Filter transactions for current user
            const userTransactions = transactions.filter(t => t.username === currentUser.username);
           
            if (userTransactions.length === 0) {
                historyList.innerHTML = '<li class="history-item">No transactions found</li>';
                return;
            }
           
            // Sort by date (newest first)
            userTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));
           
            userTransactions.forEach(transaction => {
                const historyItem = document.createElement('li');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-details">
                        <div class="history-date">${new Date(transaction.date).toLocaleString()}</div>
                        <div class="history-description">${transaction.description}</div>
                    </div>
                    <div class="history-amount ${transaction.amount >= 0 ? 'positive' : 'negative'}">
                        ${transaction.amount >= 0 ? '+' : ''}₹${Math.abs(transaction.amount)}
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }
       
        // Update dashboard stats
        function updateDashboardStats() {
            document.getElementById('totalStudents').textContent = students.length;
            document.getElementById('totalStationaryItems').textContent = stationaryItems.length;
            document.getElementById('totalTransactions').textContent = transactions.length;
        }
       
        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
           
            notificationText.textContent = message;
            notification.className = 'notification show';
           
            if (type === 'error') {
                notification.classList.add('error');
            } else if (type === 'warning') {
                notification.classList.add('warning');
            }
           
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
       
        // Admin Panel Functions
       
        // Initialize admin panel
        function initializeAdminPanel() {
            loadDataFromStorage();
            refreshAdminData();
           
            // Add tab switching functionality
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    document.querySelectorAll('.admin-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                   
                    // Add active class to clicked tab
                    this.classList.add('active');
                   
                    // Hide all tab contents
                    document.querySelectorAll('.admin-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                   
                    // Show selected tab content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
       
        // Refresh admin data
        function refreshAdminData() {
            updateUserList();
            updateBalanceUserSelect();
            updateStationaryListAdmin();
            updatePendingOrders();
            updateCreditRequests();
            updateTransactionHistoryAdmin();
            updateDashboardStats();
        }
       
        // Update user list
        function updateUserList() {
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
           
            Object.keys(users).forEach(username => {
                const user = users[username];
                const userItem = document.createElement('li');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div>
                        <strong>${username}</strong> - ${user.name} (${user.type})
                        <div>Balance: ₹${user.balance}</div>
                    </div>
                    <div class="user-actions">
                        <button class="edit-btn" onclick="editUser('${username}')">Edit</button>
                        <button class="delete-btn" onclick="deleteUser('${username}')">Delete</button>
                    </div>
                `;
                userList.appendChild(userItem);
            });
        }
       
        // Update balance user select
        function updateBalanceUserSelect() {
            const balanceUser = document.getElementById('balanceUser');
            balanceUser.innerHTML = '';
           
            Object.keys(users).forEach(username => {
                if (users[username].type === 'user') {
                    const option = document.createElement('option');
                    option.value = username;
                    option.textContent = `${username} (${users[username].name})`;
                    balanceUser.appendChild(option);
                }
            });
        }
       
        // Update user balance
        function updateUserBalance() {
            const username = document.getElementById('balanceUser').value;
            const amount = parseFloat(document.getElementById('balanceAmount').value);
            const type = document.getElementById('balanceType').value;
           
            if (!username || !amount || isNaN(amount)) {
                showNotification('Please fill in all fields correctly', 'warning');
                return;
            }
           
            // Update user balance
            if (type === 'credit') {
                users[username].balance += amount;
            } else {
                if (users[username].balance < amount) {
                    showNotification('Insufficient balance for debit', 'error');
                    return;
                }
                users[username].balance -= amount;
            }
           
            // Create transaction
            const transaction = {
                id: Date.now(),
                username: username,
                amount: type === 'credit' ? amount : -amount,
                type: type,
                date: new Date().toISOString(),
                description: `${type === 'credit' ? 'Credit' : 'Debit'} by admin`
            };
           
            transactions.push(transaction);
           
            saveDataToStorage();
            updateUserList();
            updateTransactionHistoryAdmin();
           
            document.getElementById('balanceAmount').value = '';
           
            showNotification(`User balance updated successfully!`, 'success');
        }
       
        // Add user
        function addUser() {
            const username = document.getElementById('newUsername').value.trim().toUpperCase();
            const password = document.getElementById('newPassword').value.trim();
            const userType = document.getElementById('newUserType').value;
           
            if (!username || !password) {
                showNotification('Please fill in all fields', 'warning');
                return;
            }
           
            if (users[username]) {
                showNotification('User already exists', 'error');
                return;
            }
           
            users[username] = {
                password: password,
                name: username,
                type: userType,
                balance: 0
            };
           
            saveDataToStorage();
            updateUserList();
            updateBalanceUserSelect();
           
            document.getElementById('newUsername').value = '';
            document.getElementById('newPassword').value = '';
           
            showNotification('User added successfully!');
        }
       
        // Edit user
        function editUser(username) {
            const newPassword = prompt('Enter new password for ' + username);
            if (newPassword) {
                users[username].password = newPassword;
                saveDataToStorage();
                updateUserList();
                showNotification('User updated successfully!');
            }
        }
       
        // Delete user
        function deleteUser(username) {
            if (confirm('Are you sure you want to delete user ' + username + '?')) {
                delete users[username];
                saveDataToStorage();
                updateUserList();
                updateBalanceUserSelect();
                showNotification('User deleted successfully!');
            }
        }
       
        // Update stationary list in admin panel
        function updateStationaryListAdmin() {
            const stationaryListAdmin = document.getElementById('stationaryListAdmin');
            stationaryListAdmin.innerHTML = '';
           
            stationaryItems.forEach((item, index) => {
                const stationaryItem = document.createElement('li');
                stationaryItem.className = 'stationary-item-admin';
                stationaryItem.innerHTML = `
                    <div>
                        <strong>${item.name}</strong> - ₹${item.price}
                    </div>
                    <div class="stationary-actions">
                        <button class="edit-btn" onclick="editStationaryItem(${index})">Edit</button>
                        <button class="delete-btn" onclick="deleteStationaryItem(${index})">Delete</button>
                    </div>
                `;
                stationaryListAdmin.appendChild(stationaryItem);
            });
        }
       
        // Add stationary item
        function addStationaryItem() {
            const itemName = document.getElementById('newItemName').value.trim();
            const itemPrice = parseInt(document.getElementById('newItemPrice').value);
           
            if (!itemName || !itemPrice) {
                showNotification('Please fill in all fields', 'warning');
                return;
            }
           
            stationaryItems.push({
                name: itemName,
                price: itemPrice
            });
           
            saveDataToStorage();
            updateStationaryListAdmin();
            updateDashboardStats();
           
            document.getElementById('newItemName').value = '';
            document.getElementById('newItemPrice').value = '';
           
            showNotification('Stationary item added successfully!');
        }
       
        // Edit stationary item
        function editStationaryItem(index) {
            const newName = prompt('Enter new name for ' + stationaryItems[index].name, stationaryItems[index].name);
            const newPrice = prompt('Enter new price for ' + stationaryItems[index].name, stationaryItems[index].price);
           
            if (newName && newPrice) {
                stationaryItems[index].name = newName;
                stationaryItems[index].price = parseInt(newPrice);
                saveDataToStorage();
                updateStationaryListAdmin();
                showNotification('Stationary item updated successfully!');
            }
        }
       
        // Delete stationary item
        function deleteStationaryItem(index) {
            if (confirm('Are you sure you want to delete ' + stationaryItems[index].name + '?')) {
                stationaryItems.splice(index, 1);
                saveDataToStorage();
                updateStationaryListAdmin();
                updateDashboardStats();
                showNotification('Stationary item deleted successfully!');
            }
        }
       
        // Update pending orders
        function updatePendingOrders() {
            const pendingOrdersList = document.getElementById('pendingOrders');
            pendingOrdersList.innerHTML = '';
           
            // Filter only actual orders (not credit requests)
            const actualOrders = pendingOrders.filter(order => !order.type || order.type !== 'credit_request');
           
            if (actualOrders.length === 0) {
                pendingOrdersList.innerHTML = '<li class="transaction-item">No pending orders</li>';
                return;
            }
           
            actualOrders.forEach(order => {
                const orderItem = document.createElement('li');
                orderItem.className = 'transaction-item';
                orderItem.innerHTML = `
                    <div class="transaction-details">
                        <div><strong>${order.username}</strong> - ${new Date(order.date).toLocaleString()}</div>
                        <div>${order.items.map(item => `${item.name} (${item.quantity})`).join(', ')}</div>
                        <div class="transaction-amount">Total: ₹${order.total}</div>
                    </div>
                    <div class="transaction-actions">
                        <button class="approve-btn" onclick="approveOrder(${order.id})">Approve</button>
                        <button class="reject-btn" onclick="rejectOrder(${order.id})">Reject</button>
                    </div>
                `;
                pendingOrdersList.appendChild(orderItem);
            });
        }
       
        // Update credit requests
        function updateCreditRequests() {
            const creditRequestsList = document.getElementById('creditRequests');
            creditRequestsList.innerHTML = '';
           
            // Filter only credit requests
            const creditRequests = pendingOrders.filter(order => order.type === 'credit_request');
           
            if (creditRequests.length === 0) {
                creditRequestsList.innerHTML = '<li class="transaction-item">No credit requests</li>';
                return;
            }
           
            creditRequests.forEach(request => {
                const requestItem = document.createElement('li');
                requestItem.className = 'transaction-item';
                requestItem.innerHTML = `
                    <div class="transaction-details">
                        <div><strong>${request.username}</strong> - ${new Date(request.date).toLocaleString()}</div>
                        <div>Credit Request: ₹${request.amount}</div>
                    </div>
                    <div class="transaction-actions">
                        <button class="approve-btn" onclick="approveCreditRequest(${request.id})">Approve</button>
                        <button class="reject-btn" onclick="rejectCreditRequest(${request.id})">Reject</button>
                    </div>
                `;
                creditRequestsList.appendChild(requestItem);
            });
        }
       
        // Approve order
        function approveOrder(orderId) {
            const orderIndex = pendingOrders.findIndex(order => order.id === orderId);
            if (orderIndex !== -1) {
                const order = pendingOrders[orderIndex];
               
                // Check if user has sufficient balance
                if (users[order.username].balance < order.total) {
                    showNotification('User has insufficient balance', 'error');
                    return;
                }
               
                // Deduct amount from user balance
                users[order.username].balance -= order.total;
               
                // Create transaction
                const transaction = {
                    id: Date.now(),
                    username: order.username,
                    amount: -order.total,
                    type: 'debit',
                    date: new Date().toISOString(),
                    description: 'Stationary purchase'
                };
               
                transactions.push(transaction);
               
                // Remove from pending orders
                pendingOrders.splice(orderIndex, 1);
               
                saveDataToStorage();
                updatePendingOrders();
                updateTransactionHistoryAdmin();
               
                showNotification('Order approved successfully!');
            }
        }
       
        // Reject order
        function rejectOrder(orderId) {
            const orderIndex = pendingOrders.findIndex(order => order.id === orderId);
            if (orderIndex !== -1) {
                pendingOrders.splice(orderIndex, 1);
                saveDataToStorage();
                updatePendingOrders();
                showNotification('Order rejected successfully!');
            }
        }
       
        // Approve credit request
        function approveCreditRequest(requestId) {
            const requestIndex = pendingOrders.findIndex(request => request.id === requestId);
            if (requestIndex !== -1) {
                const request = pendingOrders[requestIndex];
               
                // Add amount to user balance
                users[request.username].balance += request.amount;
               
                // Create transaction
                const transaction = {
                    id: Date.now(),
                    username: request.username,
                    amount: request.amount,
                    type: 'credit',
                    date: new Date().toISOString(),
                    description: 'Credit request approved'
                };
               
                transactions.push(transaction);
               
                // Remove from pending orders
                pendingOrders.splice(requestIndex, 1);
               
                saveDataToStorage();
                updateCreditRequests();
                updateTransactionHistoryAdmin();
               
                showNotification('Credit request approved successfully!');
            }
        }
       
        // Reject credit request
        function rejectCreditRequest(requestId) {
            const requestIndex = pendingOrders.findIndex(request => request.id === requestId);
            if (requestIndex !== -1) {
                pendingOrders.splice(requestIndex, 1);
                saveDataToStorage();
                updateCreditRequests();
                showNotification('Credit request rejected successfully!');
            }
        }
       
        // Update transaction history for admin
        function updateTransactionHistoryAdmin() {
            const transactionHistoryAdmin = document.getElementById('transactionHistoryAdmin');
            transactionHistoryAdmin.innerHTML = '';
           
            if (transactions.length === 0) {
                transactionHistoryAdmin.innerHTML = '<li class="transaction-item">No transactions</li>';
                return;
            }
           
            // Sort transactions by date (newest first)
            const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
           
            sortedTransactions.forEach(transaction => {
                const transactionItem = document.createElement('li');
                transactionItem.className = 'transaction-item';
                transactionItem.innerHTML = `
                    <div class="transaction-details">
                        <div><strong>${transaction.username}</strong> - ${new Date(transaction.date).toLocaleString()}</div>
                        <div>${transaction.description}</div>
                    </div>
                    <div class="transaction-amount ${transaction.amount >= 0 ? 'positive' : 'negative'}">
                        ${transaction.amount >= 0 ? '+' : ''}₹${Math.abs(transaction.amount)}
                    </div>
                `;
                transactionHistoryAdmin.appendChild(transactionItem);
            });
        }
       
        // Update user balance display
        function updateUserBalance() {
            if (currentUser && currentUser.type === 'user') {
                const balance = users[currentUser.username].balance;
                const balanceAmount = document.getElementById('balanceAmount');
                balanceAmount.textContent = `₹${balance}`;
                balanceAmount.className = `balance-amount ${balance >= 0 ? 'positive' : 'negative'}`;
            }
        }
       
        // Save data to localStorage
        function saveDataToStorage() {
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('stationaryItems', JSON.stringify(stationaryItems));
            localStorage.setItem('transactions', JSON.stringify(transactions));
            localStorage.setItem('pendingOrders', JSON.stringify(pendingOrders));
        }
       
        // Load data from localStorage
        function loadDataFromStorage() {
            const savedUsers = localStorage.getItem('users');
            const savedStationaryItems = localStorage.getItem('stationaryItems');
            const savedTransactions = localStorage.getItem('transactions');
            const savedPendingOrders = localStorage.getItem('pendingOrders');
           
            if (savedUsers) {
                users = JSON.parse(savedUsers);
            }
           
            if (savedStationaryItems) {
                stationaryItems = JSON.parse(savedStationaryItems);
            }
           
            if (savedTransactions) {
                transactions = JSON.parse(savedTransactions);
            }
           
            if (savedPendingOrders) {
                pendingOrders = JSON.parse(savedPendingOrders);
            }
        }
       
        // Initialize the page
        window.onload = function() {
            // Load data from storage
            loadDataFromStorage();
           
            // Check if already logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn === 'true') {
                const savedUser = JSON.parse(localStorage.getItem('currentUser'));
                if (savedUser) {
                    currentUser = savedUser;
                    document.getElementById('loginContainer').classList.add('hidden');
                    showUserInfo(currentUser.username, currentUser.name, currentUser.type);
                   
                    if (currentUser.type === 'admin') {
                        document.getElementById('adminPanel').classList.remove('hidden');
                        document.getElementById('userCart').classList.add('hidden');
                        document.getElementById('accountBalance').style.display = 'none';
                        document.getElementById('transactionHistory').classList.add('hidden');
                        initializeAdminPanel();
                    } else {
                        document.getElementById('adminPanel').classList.add('hidden');
                        document.getElementById('userCart').classList.remove('hidden');
                        document.getElementById('accountBalance').style.display = 'block';
                        document.getElementById('transactionHistory').classList.add('hidden');
                        updateUserBalance();
                        initializeUserCart();
                    }
                   
                    updateDashboardStats();
                }
            }
        };
    </script>
</body>
</html>